

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Getting Started &mdash; HIPS 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/toggleprompt.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Heuristics" href="heuristics.html" />
    <link rel="prev" title="Installation and Requirements" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> HIPS
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Requirements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-linear-program">A simple linear program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defining-the-program">Defining the program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimizing-the-program">Optimizing the program</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#high-dimensional-constraints">High-dimensional constraints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#numpy-support">NumPy support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-mixed-integer-program">A simple mixed integer program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solving-the-program-using-branch-and-bound">Solving the program using branch and bound</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#loading-mps-files">Loading .mps files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Solving the program using branch and bound</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-mixed-integer-programs-from-miplib2017">Example mixed-integer programs from MIPLIB2017</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="heuristics.html">Heuristics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_api.html">Developer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HIPS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="getting-started-label"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>On this page we show you how to get started with HIPS. We assume that you have successfully completed the setup and
installations as described in the previous chapter.</p>
<div class="section" id="a-simple-linear-program">
<h2>A simple linear program<a class="headerlink" href="#a-simple-linear-program" title="Permalink to this headline">¶</a></h2>
<a href="https://colab.research.google.com/github/cxlvinchau/hips-examples/blob/main/notebooks/simple-lp-example.ipynb" target="_blank">
    <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a><div class="section" id="defining-the-program">
<h3>Defining the program<a class="headerlink" href="#defining-the-program" title="Permalink to this headline">¶</a></h3>
<p>Let us start with defining a linear program in HIPS. First, we need to decide which solver we would like to use. In this
example we use the <a class="reference internal" href="_autosummary/hips.solver.GurobiSolver.html#hips.solver.GurobiSolver" title="hips.solver.GurobiSolver"><code class="xref py py-class docutils literal notranslate"><span class="pre">GurobiSolver</span></code></a>, but any other supported solver also works. Under the
hood, HIPS adds variables and constraints directly to the concrete solver to increase efficiency.</p>
<p>Suppose we are given the following linear program:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{lr&#64;{}c&#64;{}r&#64;{}l}
\text{maximize }   &amp; 2 x_1 + 4 x_2  \\
\text{subject to } &amp; x_1 + 2 x_2 \leq 20 \\
                   &amp; 3 x_1 - x_2 \leq 10 \\
                   &amp; x_1, x_2 \geq 0 \\
                   &amp; x_1, x_2 \in \mathbb{R}
\end{array}\end{split}\]</div>
<p>In HIPS, we can express the program as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips</span> <span class="kn">import</span> <span class="n">ProblemSense</span>
<span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">GurobiSolver</span>
<span class="kn">from</span> <span class="nn">hips.models</span> <span class="kn">import</span> <span class="n">LPModel</span>

<span class="c1"># Create solver</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">GurobiSolver</span><span class="p">()</span>
<span class="c1"># Create LP model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">LPModel</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="c1"># Create variables</span>
<span class="n">x_1</span><span class="p">,</span> <span class="n">x_2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x_1&quot;</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x_2&quot;</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Set sense</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_lp_sense</span><span class="p">(</span><span class="n">ProblemSense</span><span class="o">.</span><span class="n">MAX</span><span class="p">)</span>
<span class="c1"># Set objective</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x_1</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">x_2</span><span class="p">)</span>
<span class="c1"># Add constraints</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">x_1</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x_2</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">x_1</span> <span class="o">-</span> <span class="n">x_2</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, the definition of linear programs is straightforward. However, for larger linear programs, this might
be a little bit cumbersome. Particularly, when we have many variables. Therefore, HIPS supports high-dimensional variables.
Below you can see the same linear program expressed with a single 2 dimensional variable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips</span> <span class="kn">import</span> <span class="n">ProblemSense</span>
<span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">GurobiSolver</span>
<span class="kn">from</span> <span class="nn">hips.models</span> <span class="kn">import</span> <span class="n">LPModel</span><span class="p">,</span> <span class="n">HIPSArray</span>

<span class="c1"># Create solver</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">GurobiSolver</span><span class="p">()</span>
<span class="c1"># Create LP model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">LPModel</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="c1"># Create 2 dim. variable with lower bound 0</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># Set sense</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_lp_sense</span><span class="p">(</span><span class="n">ProblemSense</span><span class="o">.</span><span class="n">MAX</span><span class="p">)</span>
<span class="c1"># Set objective</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">HIPSArray</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span>
<span class="c1"># Add constraint</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">HIPSArray</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]])</span> <span class="o">*</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">HIPSArray</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">]))</span>
</pre></div>
</div>
<p>Observe that we have additionally imported <a class="reference internal" href="_autosummary/hips.models.HIPSArray.html#hips.models.HIPSArray" title="hips.models.HIPSArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">HIPSArray</span></code></a> to work with the 2 dimensional variable.
In contrast to the code above, we essentially work with vectors/matrices containing the coefficients for the variables.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to vectorization, it is often more efficient to use high-dimensional variables. Particularly, the implemented solvers
and heuristics strongly benefit from high-dimensional variables.</p>
</div>
</div>
<div class="section" id="optimizing-the-program">
<h3>Optimizing the program<a class="headerlink" href="#optimizing-the-program" title="Permalink to this headline">¶</a></h3>
<p>Now, let us optimize the program and output the objective value and values for the variables.</p>
<p>This is done as follows for the one-dimensional model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimize the program</span>
<span class="n">model</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
<span class="c1"># Print the objective value</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Objective value: {model.get_objective_value()}&quot;</span><span class="p">)</span>
<span class="c1"># Print the values of the variables</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;x_1: {model.variable_solution(x_1)}&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;x_2: {model.variable_solution(x_2)}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The following prints the values of the multi-dimensional model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimize the program</span>
<span class="n">model</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
<span class="c1"># Print the objective value</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Objective value: {model.get_objective_value()}&quot;</span><span class="p">)</span>
<span class="c1"># Print the values of the variables</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;x: {model.variable_solution(x)}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="high-dimensional-constraints">
<h2>High-dimensional constraints<a class="headerlink" href="#high-dimensional-constraints" title="Permalink to this headline">¶</a></h2>
<a href="https://colab.research.google.com/github/cxlvinchau/hips-examples/blob/main/notebooks/constraints-example.ipynb" target="_blank">
    <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a><p>As you have seen in the previous section, HIPS can work with matrices and vectors. In this section, we explain how to work
with high-dimensional constraints in more detail.</p>
<p>Generally, we can express high-dimensional constraints with multiple variables in HIPS, i.e. we can express constraints
of the following type:</p>
<div class="math notranslate nohighlight">
\[A_1 x_1 + \dots + A_n x_n \ \mathrm{?} \ b\]</div>
<p>where <span class="math notranslate nohighlight">\(b \in \mathbb{Q}^m\)</span>, <span class="math notranslate nohighlight">\(\mathrm{?} \in \{\leq, =, \geq\}\)</span>, <span class="math notranslate nohighlight">\(A_i \in \mathbb{Q}^{m \times d_i}\)</span> and
variable <span class="math notranslate nohighlight">\(x_i\)</span> has dimension <span class="math notranslate nohighlight">\(d_i\)</span>.</p>
<p>Consider the example below:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{pmatrix}
1 &amp; 1 \\
2 &amp; 0
\end{pmatrix}
\begin{pmatrix}
x_1 \\
x_2
\end{pmatrix} +
\begin{pmatrix}
1 &amp; 2 &amp; 3 \\
1 &amp; 0 &amp; 1
\end{pmatrix}
\begin{pmatrix}
y_1 \\
y_2 \\
y_3
\end{pmatrix}
\geq
\begin{pmatrix}
10 \\
20
\end{pmatrix}\end{split}\]</div>
<p>The corresponding code in HIPS:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips.models</span> <span class="kn">import</span> <span class="n">LPModel</span><span class="p">,</span> <span class="n">HIPSArray</span>
<span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">ClpSolver</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">LPModel</span><span class="p">(</span><span class="n">ClpSolver</span><span class="p">())</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">A</span> <span class="o">=</span> <span class="n">HIPSArray</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">HIPSArray</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">HIPSArray</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="n">constr</span> <span class="o">=</span> <span class="n">A</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">B</span><span class="o">*</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">b</span>
</pre></div>
</div>
<div class="section" id="numpy-support">
<h3>NumPy support<a class="headerlink" href="#numpy-support" title="Permalink to this headline">¶</a></h3>
<p>NumPy is the de facto standard library for scientific computing with multi-dimensional arrays and matrices in Python.
You can find more information about NumPy <a class="reference external" href="https://numpy.org/">here</a>. HIPS supports the usage of NumPy arrays, because
<a class="reference internal" href="_autosummary/hips.models.HIPSArray.html#hips.models.HIPSArray" title="hips.models.HIPSArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">HIPSArray</span></code></a> is essentially a wrapper for NumPy arrays.</p>
<p>Thus, instead of passing lists to the constructor of <a class="reference internal" href="_autosummary/hips.models.HIPSArray.html#hips.models.HIPSArray" title="hips.models.HIPSArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">hips.models.HIPSArray</span></code></a>, we can also pass <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> objects.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hips.models</span> <span class="k">import</span> <span class="n">HIPSArray</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Creating a 4x4 identity matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HIPSArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">[[1. 0. 0. 0.]</span>
<span class="go"> [0. 1. 0. 0.]</span>
<span class="go"> [0. 0. 1. 0.]</span>
<span class="go"> [0. 0. 0. 1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Creating a 2x3 matrix with zeros</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HIPSArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="go">[[0. 0. 0.]</span>
<span class="go"> [0. 0. 0.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># A simple numpy array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">HIPSArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-simple-mixed-integer-program">
<h2>A simple mixed integer program<a class="headerlink" href="#a-simple-mixed-integer-program" title="Permalink to this headline">¶</a></h2>
<a href="https://colab.research.google.com/github/cxlvinchau/hips-examples/blob/main/notebooks/mip-example.ipynb" target="_blank">
    <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a><p>Now, let us consider a mixed-integer program. Particularly, we consider the linear program from above with an additional constraint.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{lr&#64;{}c&#64;{}r&#64;{}l}
\text{maximize }   &amp; 2 x_1 + 4 x_2  \\
\text{subject to } &amp; x_1 + 2 x_2 \leq 20 \\
                   &amp; 3 x_1 - x_2 \leq 10 \\
                   &amp; x_1, x_2 \geq 0 \\
                   &amp; \color{red} {x_1 \in \mathbb{Z}}, \color{black} x_2 \in \mathbb{R} \\
\end{array}\end{split}\]</div>
<p>Compared to the example above, we have introduced the constraint <span class="math notranslate nohighlight">\(\color{red} {x_1 \in \mathbb{Z}}\)</span>. This means
that our program contains an integer and a real variable. Thus, it is no longer a linear program, but a mixed-integer program.</p>
<p>In HIPS we can write the problem as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">ClpSolver</span>
<span class="kn">from</span> <span class="nn">hips.models</span> <span class="kn">import</span> <span class="n">MIPModel</span>
<span class="kn">from</span> <span class="nn">hips</span> <span class="kn">import</span> <span class="n">ProblemSense</span><span class="p">,</span> <span class="n">VarTypes</span>

<span class="c1"># Create solver</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">ClpSolver</span><span class="p">()</span>
<span class="c1"># Create MIP model</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">MIPModel</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="c1"># Create variables with lower bound 0</span>
<span class="n">x_1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x_1&quot;</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">var_type</span><span class="o">=</span><span class="n">VarTypes</span><span class="o">.</span><span class="n">INTEGER</span><span class="p">)</span>
<span class="n">x_2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="s2">&quot;x_2&quot;</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Set sense</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_mip_sense</span><span class="p">(</span><span class="n">ProblemSense</span><span class="o">.</span><span class="n">MAX</span><span class="p">)</span>
<span class="c1"># Set objective</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">x_1</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">x_2</span><span class="p">)</span>
<span class="c1"># Add constraints</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">x_1</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x_2</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">x_1</span> <span class="o">-</span> <span class="n">x_2</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we need to replace the <a class="reference internal" href="_autosummary/hips.models.LPModel.html#hips.models.LPModel" title="hips.models.LPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">LPModel</span></code></a> with the <a class="reference internal" href="_autosummary/hips.models.MIPModel.html#hips.models.MIPModel" title="hips.models.MIPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIPModel</span></code></a>.
In HIPS there is a separation between these two program types to emphasize that heuristics are only applied to mixed-integer programs.
In terms of defining the program, the two classes share many similarities and barely differ. Please refer to the API documentation for details.
However, in contrast, the <a class="reference internal" href="_autosummary/hips.models.MIPModel.html#hips.models.MIPModel" title="hips.models.MIPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIPModel</span></code></a> has no <code class="docutils literal notranslate"><span class="pre">optimize()</span></code> method and needs heuristics or the branch and bound
solver for optimization.</p>
<p>Note that we have added an upper bound for variable <code class="docutils literal notranslate"><span class="pre">x_1</span></code>. In HIPS it is necessary to add bounds to integer variables
because many heuristics explicitly require bounds. However, this does not actually impose a limitation, as also mentioned in
<span id="id1">[<a class="reference internal" href="references.html#id4" title="Matteo Fischetti, Fred Glover, and Andrea Lodi. The feasibility pump. Mathematical Programming, 104(1):91-104, Sep 2005. URL: https://doi.org/10.1007/s10107-004-0570-3, doi:10.1007/s10107-004-0570-3.">FGL05</a>]</span>, because an optimal solution to a solvable mixed-integer program has to be finite.</p>
<div class="section" id="solving-the-program-using-branch-and-bound">
<h3>Solving the program using branch and bound<a class="headerlink" href="#solving-the-program-using-branch-and-bound" title="Permalink to this headline">¶</a></h3>
<p>As mentioned before, the <a class="reference internal" href="_autosummary/hips.models.MIPModel.html#hips.models.MIPModel" title="hips.models.MIPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIPModel</span></code></a> class does not offer the possibility to directly optimize the program.
However, it is possible to use <a class="reference internal" href="_autosummary/hips.solver.BranchAndBound.html#hips.solver.BranchAndBound" title="hips.solver.BranchAndBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">BranchAndBound</span></code></a>, HIPS’ branch and bound implementation, to
compute the optimal solution of the mixed-integer program. Please note that the class only implements a naive version of the
branch and bound algorithm and is thus not suitable for solving large problems.</p>
<p>In the following, we optimize the mixed-integer program from above. To this end, consider the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">BranchAndBound</span>

<span class="n">bb</span> <span class="o">=</span> <span class="n">BranchAndBound</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">bb</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>

<span class="c1"># Print solution</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_incumbent</span><span class="p">()</span>

<span class="c1"># Print objective value</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_incumbent_val</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="loading-mps-files">
<h2>Loading .mps files<a class="headerlink" href="#loading-mps-files" title="Permalink to this headline">¶</a></h2>
<a href="https://colab.research.google.com/github/cxlvinchau/hips-examples/blob/main/notebooks/mps-example.ipynb" target="_blank">
    <img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a><p>The previous sections introduced how to explicitly create an MIP model.
This approach is impractical for most real-life problems, since the number of variable and constraints in those models can
be very large. Therefore, HIPS provides utility functions to read models from MPS files.</p>
<p>MPS (Mathematical Programming System) is a file format for representing linear and mixed-integer problem and is a standard in most commercial and open-source
solvers. It is column-oriented which makes it rather difficult to read for humans. An elaborate explanation of the format and its various
header sections can be found in <span id="id2">[<a class="reference internal" href="references.html#id3" title="LLC Gurobi Optimization. Mps format. URL: https://www.gurobi.com/documentation/9.1/refman/mps_format.html.">GO</a>]</span>. It should be noted, that the optimization
sense is not specifiable in the MPS format and, thus, has to be set manually after loading.</p>
<p>There are two utility functions implemented in HIPS for loading an MPS file into a <a class="reference internal" href="_autosummary/hips.models.MIPModel.html#hips.models.MIPModel" title="hips.models.MIPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIPModel</span></code></a>.</p>
<p>The <a class="reference internal" href="_autosummary/hips.loader.load_mps_primitive.html#hips.loader.load_mps_primitive" title="hips.loader.load_mps_primitive"><code class="xref py py-func docutils literal notranslate"><span class="pre">primitive</span> <span class="pre">loader</span></code></a> loads every variable of the MPS file specified
in the <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter as a 1-dimensional variable. The specified <code class="docutils literal notranslate"><span class="pre">path</span></code> is concatenated with the current
working directory. This loader version can be used for easy understanding and debugging of the created model. However
the runtime of this loader suffers from computational inefficiency.</p>
<p>The second <a class="reference internal" href="_autosummary/hips.loader.load_mps.html#hips.loader.load_mps" title="hips.loader.load_mps"><code class="xref py py-func docutils literal notranslate"><span class="pre">loader</span></code></a> loads the continuous, integer and binary variables as
multidimensional variables. This allows the underlying solvers to make use of vectorization. Therefore, this loader is
much more efficient than the primitive version.</p>
<p>We can use the MPS loader in HIPS as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">ClpSolver</span>
<span class="kn">from</span> <span class="nn">hips.models</span> <span class="kn">import</span> <span class="n">MIPModel</span>
<span class="kn">from</span> <span class="nn">hips.loader</span> <span class="kn">import</span> <span class="n">load_mps</span>
<span class="kn">from</span> <span class="nn">hips</span> <span class="kn">import</span> <span class="n">ProblemSense</span>

<span class="c1"># create an mip model with an underlying solver</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">MIPModel</span><span class="p">(</span><span class="n">ClpSolver</span><span class="p">())</span>
<span class="c1"># load the problem specified in the .mps file at the path parameter into our model</span>
<span class="n">load_mps</span><span class="p">(</span><span class="n">mip_model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;path_to_mps/mps_file.mps&#39;</span><span class="p">)</span>
<span class="c1"># set the optimization sense</span>
<span class="n">model</span><span class="o">.</span><span class="n">set_mip_sense</span><span class="p">(</span><span class="n">ProblemSense</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id3">
<h3>Solving the program using branch and bound<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>As shown above, we run the following lines to optimize the loaded model with branch and bound algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips.solver</span> <span class="kn">import</span> <span class="n">BranchAndBound</span>

<span class="n">bb</span> <span class="o">=</span> <span class="n">BranchAndBound</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">bb</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>

<span class="c1"># Print solution</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_incumbent</span><span class="p">()</span>

<span class="c1"># Print objective value</span>
<span class="n">bb</span><span class="o">.</span><span class="n">get_incumbent_val</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-mixed-integer-programs-from-miplib2017">
<h2>Example mixed-integer programs from MIPLIB2017<a class="headerlink" href="#example-mixed-integer-programs-from-miplib2017" title="Permalink to this headline">¶</a></h2>
<p>The MIPLIB2017 <span id="id4">[<a class="reference internal" href="references.html#id10" title="Ambros Gleixner, Gregor Hendel, Gerald Gamrath, Tobias Achterberg, Michael Bastubbe, Timo Berthold, Philipp M. Christophel, Kati Jarck, Thorsten Koch, Jeff Linderoth, Marco Lübbecke, Hans D. Mittelmann, Derya Ozyurt, Ted K. Ralphs, Domenico Salvagnin, and Yuji Shinano. MIPLIB 2017: Data-Driven Compilation of the 6th Mixed-Integer Programming Library. Mathematical Programming Computation, 2021. URL: https://doi.org/10.1007/s12532-020-00194-3, doi:10.1007/s12532-020-00194-3.">GHG+21</a>]</span> is a collection of real-world mixed-integer programs. HIPS already comes with a selection
of problems from the collection to help you get started faster.</p>
<p>The following problems can be easily loaded:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">10teams</span></code> (<a class="reference external" href="https://miplib.zib.de/instance_details_10teams.html">https://miplib.zib.de/instance_details_10teams.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bppc8-02</span></code> (<a class="reference external" href="http://miplib2017.zib.de/instance_details_bppc8-02.html">http://miplib2017.zib.de/instance_details_bppc8-02.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flugpl</span></code> (<a class="reference external" href="http://miplib2017.zib.de/instance_details_flugpl.html">http://miplib2017.zib.de/instance_details_flugpl.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gen-ip054</span></code> (<a class="reference external" href="https://miplib2017.zib.de/instance_details_gen-ip054.html">https://miplib2017.zib.de/instance_details_gen-ip054.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gr4x6</span></code> (<a class="reference external" href="https://miplib.zib.de/instance_details_gr4x6.html">https://miplib.zib.de/instance_details_gr4x6.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">osorio-cta</span></code> (<a class="reference external" href="http://miplib.zib.de/instance_details_osorio-cta.html">http://miplib.zib.de/instance_details_osorio-cta.html</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">22433</span></code> (<a class="reference external" href="https://miplib.zib.de/instance_details_22433.html">https://miplib.zib.de/instance_details_22433.html</a>)</p></li>
</ul>
<p>We would like to thank the authors and people involved for their contribution and would like to emphasize that they are not linked to or involved in HIPS,
nor do they endorse HIPS. The examples are licensed under Attribution-ShareAlike 4.0 International (CC BY-SA 4.0) (<a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/">https://creativecommons.org/licenses/by-sa/4.0/</a>).</p>
<p>In order to load a problem, we simply pass the problem name to <a class="reference internal" href="_autosummary/hips.load_problem.html#hips.load_problem" title="hips.load_problem"><code class="xref py py-func docutils literal notranslate"><span class="pre">hips.load_problem()</span></code></a> and it automatically returns a <a class="reference internal" href="_autosummary/hips.models.MIPModel.html#hips.models.MIPModel" title="hips.models.MIPModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIPModel</span></code></a>
containing the problem. By default, the function tries to use the <a class="reference internal" href="_autosummary/hips.solver.GurobiSolver.html#hips.solver.GurobiSolver" title="hips.solver.GurobiSolver"><code class="xref py py-class docutils literal notranslate"><span class="pre">hips.solver.GurobiSolver</span></code></a>. If this fails, the <a class="reference internal" href="_autosummary/hips.solver.ClpSolver.html#hips.solver.ClpSolver" title="hips.solver.ClpSolver"><code class="xref py py-class docutils literal notranslate"><span class="pre">hips.solver.ClpSolver</span></code></a> is used.
The code below loads the <code class="docutils literal notranslate"><span class="pre">10teams</span></code> problem.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hips</span> <span class="kn">import</span> <span class="n">load_problem</span>

<span class="n">mip_model</span> <span class="o">=</span> <span class="n">load_problem</span><span class="p">(</span><span class="s2">&quot;10teams&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="heuristics.html" class="btn btn-neutral float-right" title="Heuristics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation and Requirements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Severin Bals and Calvin Chau.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>